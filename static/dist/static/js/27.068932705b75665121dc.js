(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[27],{251:function(e,t,r){"use strict";r.r(t);var a=r(252);var n=r.n(a);for(var i in a)if(i!=="default")(function(e){r.d(t,e,function(){return a[e]})})(i);t["default"]=n.a},252:function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=a(r(5));var i=a(r(23));var o=a(r(24));var u=r(16);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,n.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var c={name:"group-dialog",components:{SelectSearch:function e(){return r.e(0).then(r.bind(null,214))}},props:{dialogType:{type:String,default:function e(){return"creator"}}},data:function e(){return{config:{editor:{title:"编辑组秘书信息",groupNameDisabled:true},creator:{title:"指派秘书"}},visible:false,formData:{secretaries:[],group_id:"",group_full_name:""},rules:Object.freeze({name:[{required:true,message:"请输入组织名",trigger:"blur"}],secretaries:[{required:true,message:"请选择奖项负责人",trigger:"blur",type:Array}],organisation:[{required:true,message:"请输入组织名",trigger:"blur"}]}),settings:[{prop:"name",label:"组织名"},{prop:"level",label:"级别"},{prop:"master",label:"负责人"}],totalMaster:[],totalDepartment:[]}},computed:{secretaries:{get:function e(t){return t.formData.secretaries.map(function(e){return e.username})},set:function e(t){var r;this.formData.secretaries=(r=this.$http.cache.get(u.GROUP_USERS_KEYNAME))===null||r===void 0?void 0:r.filter(function(e){return t.includes(e["username"])})}},groupInfo:{get:function e(t){return t.formData.group_id},set:function e(t){var r=this.formData;var a=this.$http.cache.get(u.GROUP_KEYNAME);r.group_id=t;r.group_full_name=a.find(function(e){return e.id===t})["full_name"]}}},created:function e(){this.handleInit()},methods:{handleInit:function e(){},checkValid:function e(){var t=this.$refs["form"];return new Promise(function(e){t.validate().then(function(t){e(true)}).catch(function(t){e(false)})})},handleDialogConfirm:function e(t){var r=this;return(0,o.default)(i.default.mark(function e(){return i.default.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return r.checkValid();case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:r.$emit("confirm",r.formData);case 5:case"end":return t.stop()}}},e)}))()},handleDialogCancel:function e(t){this.$emit("cancel",t);this.hidden()},show:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{data:null,callback:function e(){}};if(t.data){this.formData=s({},t.data)}this.visible=true},hidden:function e(){this.visible=false;this.formData={secretaries:[],group_id:"",group_full_name:""}}}};t.default=c},302:function(e,t,r){"use strict";r.r(t);var a=r(335);var n=r(251);for(var i in n)if(i!=="default")(function(e){r.d(t,e,function(){return n[e]})})(i);var o=r(3);var u=Object(o["a"])(n["default"],a["a"],a["b"],false,null,"442fd726",null);t["default"]=u.exports},335:function(e,t,r){"use strict";var a=function(){var e=this;var t=e.$createElement;var r=e._self._c||t;return r("div",{staticClass:"dialog-container"},[r("bk-dialog",{attrs:{"render-directive":"if",theme:"primary","header-position":"left",size:"small","ext-cls":"dialog","mask-close":false,loading:e.$attrs["loading"],"confirm-fn":e.handleDialogConfirm},on:{cancel:function(t){e.handleDialogCancel(e.formData)}},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[r("p",{staticClass:"dialog-title f17 fb",attrs:{slot:"header"},slot:"header"},[e._v("\n            "+e._s(e.config[e.dialogType].title)+"\n        ")]),e._v(" "),e.visible?r("bk-form",{ref:"form",attrs:{"label-width":80,model:e.formData,rules:e.rules}},[r("bk-form-item",{attrs:{label:"组名称",required:true,property:"name"}},[r("select-search",{attrs:{placeholder:"请选择现有组织",value:e.groupInfo,type:"group",multiple:false,disabled:e.config[e.dialogType]["groupNameDisabled"]},on:{"update:value":function(t){e.groupInfo=t}}})],1),e._v(" "),r("bk-form-item",{attrs:{label:"负责人",required:true,property:"master"}},[r("select-search",{attrs:{placeholder:"请选择负责人",value:e.secretaries,"id-key":"username"},on:{"update:value":function(t){e.secretaries=t}}})],1)],1):e._e()],1)],1)};var n=[];r.d(t,"a",function(){return a});r.d(t,"b",function(){return n})}}]);