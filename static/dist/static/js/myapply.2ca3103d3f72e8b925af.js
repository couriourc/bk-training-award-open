(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{202:function(t,e,a){"use strict";a.r(e);var n=a(328);var r=a(230);for(var o in r)if(o!=="default")(function(t){a.d(e,t,function(){return r[t]})})(o);var i=a(294);var u=a(3);var l=Object(u["a"])(r["default"],n["a"],n["b"],false,null,"60d6c172",null);e["default"]=l.exports},208:function(t,e,a){"use strict";var n=a(1);Object.defineProperty(e,"__esModule",{value:true});e.deleteAward=_;e.deleteRecord=f;e.getAppliedAwards=p;e.getAvailableAwards=c;e.getAwards=s;e.postAwards=l;e.postRecord=d;e.putAward=v;var r=n(a(5));var o=n(a(6));function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach(function(e){(0,r.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function l(t){return o.default.post("awards/",t)}function s(t,e){return o.default.get("awards/",{params:{page:t,size:e}})}function c(t,e){return o.default.get("get_available_awards/",{params:{page:t,size:e}})}function p(t,e){return o.default.get("get_applyed_awards/",{params:{page:t,size:e}})}function d(t,e){return o.default.post("record/",u({is_draft:t},e))}function f(t){console.log(t);return o.default.put("record/",{id:t})}function _(t){var e=t.awardId;return o.default.delete("awards/",{data:{award_id:e}})}function v(t,e){var a=e.award_name,n=e.award_level,r=e.award_description,i=e.award_consultant,u=e.award_image,l=e.award_department_fullname,s=e.award_reviewers,c=e.start_time,p=e.end_time;return o.default.put("awards/",{award_id:t,award_name:a,award_level:n,award_description:r,award_consultant:i,award_image:u,award_department_fullname:l,award_reviewers:s,start_time:c,end_time:p})}},230:function(t,e,a){"use strict";a.r(e);var n=a(231);var r=a.n(n);for(var o in n)if(o!=="default")(function(t){a.d(e,t,function(){return n[t]})})(o);e["default"]=r.a},231:function(t,e,a){"use strict";var n=a(1);Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var r=n(a(5));var o=a(208);var i=a(232);var u=a(16);function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach(function(e){(0,r.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var c={data:function t(){var e;return{userInfo:null,size:"small",departValue:"",data:[],pagination:{current:1,count:0,limit:10},remoteData:[],isLoading:false,config:{approval_status_button:(e={},(0,r.default)(e,u.REVIEW_PENDING,{"is-review_pending":true}),(0,r.default)(e,u.REVIEW_PASSED,{"button-title":"--",disabled:true}),(0,r.default)(e,u.REVIEW_NOT_PASSED,{"button-title":"重新申请","button-func":this.handleToApply}),(0,r.default)(e,u.DRAFT,{"button-title":"发起申请","button-func":this.handleToApply}),e)}}},computed:{tableData:{get:function t(e){var a,n,r;return(a=(n=e.remoteData)===null||n===void 0?void 0:(r=n.map)===null||r===void 0?void 0:r.call(n,function(t){return s(s(s({},t["award_info"]),t),{},{approval_state_cn:u.APPLY_APPROVAL_STATE_MAP[t["approval_state"]],approval_state_en:u.APPLY_APPROVAL_STATE_EN_MAP[t["approval_state"]]})}))!==null&&a!==void 0?a:[]}},approval_status_button_config:function t(e){return e.config["approval_status_button"]}},created:function t(){this.handleGetPageData()},methods:{handleInit:function t(){this.handleGetPageData()},handlePageChange:function t(e){this.pagination.current=e;return this.handleGetPageData()},handleLimitChange:function t(e){this.pagination.limit=e;this.pagination.current=1;return this.handleGetPageData()},handleGetPageData:function t(){var e=this;var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.pagination.current;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.pagination.limit;this.isLoading=true;return(0,i.getRecord)(a,n).then(function(t){e.remoteData=t.data["data"]}).finally(function(t){e.isLoading=false})},handleToDelApply:function t(e){var a=this;var n=e.id;return(0,o.deleteRecord)(n).then(function(t){a.messageSuccess("撤销成功");a.handleGetPageData()})},handleToDetail:function t(){},handleToApply:function t(e){this.$router.push({name:"detail",params:s(s({},e),{},{type:"apply"})})}}};e.default=c},232:function(t,e,a){"use strict";var n=a(1);Object.defineProperty(e,"__esModule",{value:true});e.getApproval=o;e.getRecord=i;e.postApproval=u;var r=n(a(6));function o(t,e){return r.default.get("/approval/",{params:{page:t,size:e}})}function i(t,e){return r.default.get("record/",{params:{page:t,size:e}})}function u(t){var e=t.id,a=t.action,n=t.approval_text;return r.default.post("/approval/",{id:e,action:a,approval_text:n})}},233:function(t,e,a){},294:function(t,e,a){"use strict";var n=a(233);var r=a.n(n);var o=r.a},328:function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{staticClass:"my-apply-container"},[a("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.isLoading},expression:"{ isLoading: isLoading }"}],staticStyle:{"margin-top":"15px"},attrs:{data:t.tableData,pagination:t.pagination},on:{"page-change":function(e){t.handlePageChange(e)},"page-limit-change":function(e){t.handleLimitChange(e)}}},[a("bk-table-column",{attrs:{label:"序号",type:"index",width:"80"}}),t._v(" "),a("bk-table-column",{attrs:{label:"奖项名称",prop:"award_name"}}),t._v(" "),a("bk-table-column",{attrs:{label:"申请时间",prop:"application_time"}}),t._v(" "),a("bk-table-column",{attrs:{label:"申请原因",prop:"application_reason","min-width":150},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{directives:[{name:"bk-overflow-tips",rawName:"v-bk-overflow-tips",value:{content:e.row["application_reason"]},expression:"{ content: props.row['application_reason'] }"}]},[t._v("\n                    "+t._s(e.row["application_reason"])+"\n                ")])]}}])}),t._v(" "),a("bk-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:["status",e.row.approval_state_en]},[t._v("\n                    "+t._s(e.row.approval_state_cn)+"\n                ")])]}}])}),t._v(" "),a("bk-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.approval_status_button_config[e.row["approval_state"]]["is-review_pending"]?[a("bk-button",{attrs:{theme:"primary",text:true},on:{click:function(a){t.handleToApply(e.row)}}},[t._v("\n                        编辑申请\n                    ")]),t._v(" "),a("bk-popconfirm",{attrs:{title:"确认撤销申请该奖项（"+e.row["award_name"]+"）？",trigger:"click",content:"删除操作无法撤回，请谨慎操作！"},on:{confirm:function(a){t.handleToDelApply(e.row)}}},[a("bk-button",{staticClass:"ml10",attrs:{theme:"primary",text:true}},[t._v("\n                            撤销申请\n                        ")])],1)]:a("bk-button",{staticClass:"mr10",attrs:{theme:"primary",text:true,disabled:t.approval_status_button_config[e.row["approval_state"]]["disabled"]},on:{click:function(a){t.approval_status_button_config[e.row["approval_state"]]["button-func"](e.row)}}},[t._v("\n                    "+t._s(t.approval_status_button_config[e.row["approval_state"]]["button-title"])+"\n                ")])]}}])})],1)],1)};var r=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return r})}}]);