(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{198:function(t,e,a){"use strict";a.r(e);var r=a(332);var n=a(220);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);var o=a(291);var l=a(3);var u=Object(l["a"])(n["default"],r["a"],r["b"],false,null,"61652298",null);e["default"]=u.exports},206:function(t,e,a){"use strict";var r=a(1);Object.defineProperty(e,"__esModule",{value:true});e.REVIEW_PENDING=e.REVIEW_PASSED=e.REVIEW_NOT_PASSED=e.NOT_APPLY=e.GROUP_USERS_KEYNAME=e.GROUP_KEYNAME=e.ENDED=e.DRAFT=e.AWARD_LEVEL_MAP=e.AWARD_LEVEL_EN_MAP=e.AWARD_APPROVAL_STATE_MAP=e.AWARD_APPROVAL_STATE_EN_MAP=e.APPROVAL_STATE=e.APPLY_APPROVAL_STATE_MAP=e.APPLY_APPROVAL_STATE_EN_MAP=e.APPLYED=void 0;var n=r(a(5));var i,o,l,u,s,c,d;var f=0;e.NOT_APPLY=f;var p=1;e.APPLYED=p;var m=2;e.ENDED=m;var h=(i={},(0,n.default)(i,f,f),(0,n.default)(i,p,p),i);e.APPROVAL_STATE=h;var _=(o={},(0,n.default)(o,f,"未开始"),(0,n.default)(o,p,"申请中"),(0,n.default)(o,m,"已结束"),o);e.AWARD_APPROVAL_STATE_MAP=_;var v=(l={},(0,n.default)(l,f,"not_apply"),(0,n.default)(l,p,"applyied"),(0,n.default)(l,m,"ended"),l);e.AWARD_APPROVAL_STATE_EN_MAP=v;var w=0;e.REVIEW_PENDING=w;var A=1;e.REVIEW_PASSED=A;var g=2;e.REVIEW_NOT_PASSED=g;var P=3;e.DRAFT=P;var b=(u={},(0,n.default)(u,w,"待评审"),(0,n.default)(u,A,"评审通过"),(0,n.default)(u,g,"评审不通过"),(0,n.default)(u,P,"草稿"),u);e.APPLY_APPROVAL_STATE_MAP=b;var E=(s={},(0,n.default)(s,w,"review_pending"),(0,n.default)(s,A,"review_passed"),(0,n.default)(s,g,"review_not_passed"),(0,n.default)(s,P,"draft"),s);e.APPLY_APPROVAL_STATE_EN_MAP=E;var D=0;var O=1;var y=(c={},(0,n.default)(c,D,"公司"),(0,n.default)(c,O,"小组"),c);e.AWARD_LEVEL_MAP=y;var S=(d={},(0,n.default)(d,D,"company"),(0,n.default)(d,O,"group"),d);e.AWARD_LEVEL_EN_MAP=S;var R="groupUser";e.GROUP_USERS_KEYNAME=R;var k="group";e.GROUP_KEYNAME=k},207:function(t,e,a){"use strict";var r=a(1);Object.defineProperty(e,"__esModule",{value:true});e.deleteAward=m;e.deleteRecord=p;e.getAppliedAwards=d;e.getAvailableAwards=c;e.getAwards=s;e.postAwards=u;e.postRecord=f;e.putAward=h;var n=r(a(5));var i=r(a(15));function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,r)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach(function(e){(0,n.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function u(t){return i.default.post("awards/",t)}function s(t,e){return i.default.get("awards/",{params:{page:t,size:e}})}function c(t,e){return i.default.get("get_available_awards/",{params:{page:t,size:e}})}function d(t,e){return i.default.get("get_applyed_awards/",{params:{page:t,size:e}})}function f(t,e){return i.default.post("record/",l({is_draft:t},e))}function p(t){return i.default.post("record/",{id:t})}function m(t){var e=t.awardId;return i.default.delete("awards/",{params:{award_id:e}})}function h(t,e){var a=e.award_name,r=e.award_level,n=e.award_description,o=e.award_consultant,l=e.award_image,u=e.award_department_fullname,s=e.award_reviewers,c=e.start_time,d=e.end_time;return i.default.put("awards/",{award_id:t,award_name:a,award_level:r,award_description:n,award_consultant:o,award_image:l,award_department_fullname:u,award_reviewers:s,start_time:c,end_time:d})}},208:function(t,e,a){"use strict";var r=a(1);Object.defineProperty(e,"__esModule",{value:true});Object.defineProperty(e,"fixMixins",{enumerable:true,get:function t(){return i.default}});Object.defineProperty(e,"tableMixins",{enumerable:true,get:function t(){return n.default}});var n=r(a(209));var i=r(a(210))},209:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var r={data:function t(){return{remoteData:[],pagination:{current:1,count:0,limit:10},tableDataIsLoading:false,tableDataUrl:""}},methods:{handlePageSizeChange:function t(e){this.pagination.current=1;this.pagination.limit=e;this.handleGetPageData(this.pagination.current,e)},handleCurrentChange:function t(e){this.pagination.current=e;this.handleGetPageData(e,this.pagination.limit)},handleGetPageData:function t(e,a){var r=this;var n=this.tableDataUrl;this.tableDataIsLoading=true;return this.$http.get(n).then(function(t){r.remoteData=t.data.results}).finally(function(t){r.tableDataIsLoading=false})}}};e.default=r},210:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var r={data:function t(){},computed:function t(){},mounted:function t(){this.adjustTable()},methods:{adjustTable:function t(){document.querySelector(".main-content").style.minHeight="0";document.querySelector(".main-content").style.height="100%"},notImplemented:function t(e){var a="正在开发: ".concat(e);alert(a);throw new Error(a)}}};e.default=r},220:function(t,e,a){"use strict";a.r(e);var r=a(221);var n=a.n(r);for(var i in r)if(i!=="default")(function(t){a.d(e,t,function(){return r[t]})})(i);e["default"]=n.a},221:function(t,e,a){"use strict";var r=a(1);Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var n=r(a(156));var i=r(a(5));var o=a(208);var l=a(206);var u=a(207);function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,r)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach(function(e){(0,i.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var d={name:"award-manager",components:{DialogArea:function t(){return a.e(20).then(a.bind(null,303))},BatchCloneForm:function t(){return a.e(18).then(a.bind(null,305))},BatchSendEmailForm:function t(){return a.e(16).then(a.bind(null,307))},NotificationForm:function t(){return a.e(17).then(a.bind(null,309))},EndAwardForm:function t(){return a.e(19).then(a.bind(null,311))}},mixins:[o.fixMixins,o.tableMixins],data:function t(){return{size:"small",loading:{newAwardFormLoading:false},isFilter:"",tableSettings:{awardName:"奖项名称",awardStatus:"状态",startApplyTime:"开始申请时间",endApplyTime:"截止申请时间"},isDialogShow:false,remoteData:[],formData:{},selectData:[],checkData:{}}},computed:{tableData:function t(){var e,a;var r=this.remoteData;return(e=r===null||r===void 0?void 0:(a=r.map)===null||a===void 0?void 0:a.call(r,function(t){return c(c({},t),{},{awardName:t["award_name"],awardStatus:l.AWARD_APPROVAL_STATE_MAP[t["approval_state"]],startApplyTime:t["start_time"],endApplyTime:t["end_time"]})}))!==null&&e!==void 0?e:[]}},created:function t(){this.handleInit()},mounted:function t(){},methods:{handleInit:function t(){this.handleGetPageData()},toAddNewAward:function t(){this.$router.push({name:"award-form",path:"award-manager/award-form/new",params:{type:"new"}})},toBatchClone:function t(e,a){if(!a.length){this.messageError("请先选择奖项");return null}e.show()},toSendEmail:function t(e,a){if(!a.length){this.messageError("请先选择奖项");return null}e.show();this.notImplemented("数据接口对接")},toBatchExport:function t(e){this.notImplemented("导出数据")},toSendNotification:function t(e){e.show();this.notImplemented("获取成员信息")},toShowFilterPanel:function t(){this.isFilter=this.isFilter?"":"filter-panel"},toEditRow:function t(e){return this.$router.push({name:"award-form",path:"award-manager/award-form/edit",params:c(c({},e),{},{type:"edit"})})},toGetDetail:function t(e){return this.$router.push({name:"award-form",path:"award-manager/award-form/detail",params:c(c({},e),{},{type:"detail"})})},toEndAward:function t(e,a){a.show()},confirmDelAward:function t(e){var a=this;return(0,u.deleteAward)({awardId:e["id"]}).then(function(t){a.messageSuccess("删除成功")})},handleSetSelectData:function t(e){this.selectData=(0,n.default)(e)},handlePageSizeChange:function t(e){this.pagination.current=1;this.pagination.limit=e;this.handleGetPageData(this.pagination.current,e)},handleCurrentChange:function t(e){this.pagination.current=e;this.handleGetPageData(e,this.pagination.limit)},handleGetPageData:function t(){var e=this;var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.pagination.current;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.pagination.limit;this.isLoading=true;return(0,u.getAwards)(a,r).then(function(t){e.remoteData=t.data["data"];e.pagination.count=t.data["count"]}).finally(function(t){e.isLoading=false})}}};e.default=d},222:function(t,e,a){},291:function(t,e,a){"use strict";var r=a(222);var n=a.n(r);var i=n.a},332:function(t,e,a){"use strict";var r=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{staticClass:"award-container"},[a("div",{staticClass:"header-container f-c-space-arround"},[a("div",{staticClass:"filter-panel"},[a("bk-collapse",{model:{value:t.isFilter,callback:function(e){t.isFilter=e},expression:"isFilter"}},[a("bk-collapse-item",{attrs:{name:"filter-panel","hide-arrow":true,"custom-trigger-area":true}},[a("div",{staticClass:"button-panel",attrs:{slot:"no-trigger"},slot:"no-trigger"},[a("div",{staticClass:"left-panel"},[a("bk-button",{attrs:{theme:"primary",icon:"plus-circle-shape"},on:{click:function(e){t.toAddNewAward()}}},[t._v("\n                                新增\n                            ")]),t._v(" "),a("bk-button",{attrs:{theme:"default"},on:{click:function(e){t.toBatchClone(t.$refs["BatchCloneForm"],t.selectData)}}},[t._v("\n                                批量克隆\n                            ")]),t._v(" "),a("bk-button",{attrs:{theme:"default"},on:{click:function(e){t.toSendEmail(t.$refs["BatchSendEmailForm"],t.selectData)}}},[t._v("\n                                邮件通知\n                            ")]),t._v(" "),a("bk-button",{attrs:{theme:"default"},on:{click:function(e){t.toBatchExport(t.$refs["BatchExportForm"])}}},[t._v("\n                                批量导出\n                            ")]),t._v(" "),a("bk-button",{attrs:{theme:"default"},on:{click:function(e){t.toSendNotification(t.$refs["NotificationForm"])}}},[t._v("\n                                获奖公示\n                            ")])],1)])])],1)],1)]),t._v(" "),a("bk-table",{staticClass:"mt15",attrs:{data:t.tableData,size:t.size,pagination:t.pagination,"virtual-render":true},on:{"page-change":function(e){t.handleCurrentChange(e)},"page-limit-change":function(e){t.handlePageSizeChange(e)},"selection-change":t.handleSetSelectData}},[a("bk-table-column",{attrs:{type:"selection",width:"60"}}),t._v(" "),t._l(t.tableSettings,function(e,r){return a("bk-table-column",{key:r,attrs:{label:e},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row[r]))])]}}])})}),t._v(" "),a("bk-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.row.isProcess,expression:"!props.row.isProcess"}]},[a("bk-button",{attrs:{theme:"primary",text:true},on:{click:function(a){t.toEditRow(e.row)}}},[t._v("编辑")]),t._v(" "),a("bk-popconfirm",{attrs:{title:"确认删除该奖项（"+e.row.awardName+"）？",trigger:"click",content:"删除操作无法撤回，请谨慎操作！"},on:{confirm:function(a){t.confirmDelAward(e.row)}}},[a("bk-button",{attrs:{theme:"primary",text:""}},[t._v("删除")])],1),t._v(" "),a("bk-button",{attrs:{theme:"primary",text:""},on:{click:function(a){t.toGetDetail(e.row,t.$refs["GetDetailDialog"])}}},[t._v("详情")])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.row.isProcess,expression:"props.row.isProcess"}]},[a("bk-button",{attrs:{theme:"primary",text:""},on:{click:function(a){t.toEndAward(e.row,t.$refs["EndAwardForm"])}}},[t._v("结束")])],1)]}}])})],2),t._v(" "),a("DialogArea",{ref:"BatchCloneForm",attrs:{title:"批量克隆"}},[a("BatchCloneForm",{attrs:{slot:"custom","form-data":t.selectData,"total-data":t.tableData},slot:"custom"})],1),t._v(" "),a("DialogArea",{ref:"BatchSendEmailForm",attrs:{title:"批量发送邮件"}},[a("BatchSendEmailForm",{attrs:{slot:"custom","select-data":t.selectData},slot:"custom"})],1),t._v(" "),a("DialogArea",{ref:"NotificationForm",attrs:{title:"编辑公示"}},[a("NotificationForm",{attrs:{slot:"custom","select-data":t.selectData},slot:"custom"})],1),t._v(" "),a("DialogArea",{ref:"EndAwardForm",attrs:{title:"删除奖项"}},[a("EndAwardForm",{attrs:{slot:"custom"},slot:"custom"})],1)],1)};var n=[];a.d(e,"a",function(){return r});a.d(e,"b",function(){return n})}}]);