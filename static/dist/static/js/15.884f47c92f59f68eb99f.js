(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{206:function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:true});t.REVIEW_PENDING=t.REVIEW_PASSED=t.REVIEW_NOT_PASSED=t.NOT_APPLY=t.GROUP_USERS_KEYNAME=t.GROUP_KEYNAME=t.ENDED=t.DRAFT=t.AWARD_LEVEL_MAP=t.AWARD_LEVEL_EN_MAP=t.AWARD_APPROVAL_STATE_MAP=t.AWARD_APPROVAL_STATE_EN_MAP=t.APPROVAL_STATE=t.APPLY_APPROVAL_STATE_MAP=t.APPLY_APPROVAL_STATE_EN_MAP=t.APPLYED=void 0;var n=a(r(5));var i,u,o,l,s,f,c;var d=0;t.NOT_APPLY=d;var _=1;t.APPLYED=_;var p=2;t.ENDED=p;var v=(i={},(0,n.default)(i,d,d),(0,n.default)(i,_,_),i);t.APPROVAL_STATE=v;var A=(u={},(0,n.default)(u,d,"未开始"),(0,n.default)(u,_,"申请中"),(0,n.default)(u,p,"已结束"),u);t.AWARD_APPROVAL_STATE_MAP=A;var P=(o={},(0,n.default)(o,d,"not_apply"),(0,n.default)(o,_,"applyied"),(0,n.default)(o,p,"ended"),o);t.AWARD_APPROVAL_STATE_EN_MAP=P;var E=0;t.REVIEW_PENDING=E;var g=1;t.REVIEW_PASSED=g;var m=2;t.REVIEW_NOT_PASSED=m;var b=3;t.DRAFT=b;var h=(l={},(0,n.default)(l,E,"待评审"),(0,n.default)(l,g,"评审通过"),(0,n.default)(l,m,"评审不通过"),(0,n.default)(l,b,"草稿"),l);t.APPLY_APPROVAL_STATE_MAP=h;var D=(s={},(0,n.default)(s,E,"review_pending"),(0,n.default)(s,g,"review_passed"),(0,n.default)(s,m,"review_not_passed"),(0,n.default)(s,b,"draft"),s);t.APPLY_APPROVAL_STATE_EN_MAP=D;var O=0;var R=1;var S=(f={},(0,n.default)(f,O,"公司"),(0,n.default)(f,R,"小组"),f);t.AWARD_LEVEL_MAP=S;var T=(c={},(0,n.default)(c,O,"company"),(0,n.default)(c,R,"group"),c);t.AWARD_LEVEL_EN_MAP=T;var L="groupUser";t.GROUP_USERS_KEYNAME=L;var y="group";t.GROUP_KEYNAME=y},246:function(e,t,r){"use strict";r.r(t);var a=r(247);var n=r.n(a);for(var i in a)if(i!=="default")(function(e){r.d(t,e,function(){return a[e]})})(i);t["default"]=n.a},247:function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=a(r(5));var i=a(r(21));var u=a(r(22));var o=r(206);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,n.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var f={name:"group-dialog",components:{SelectSearch:function e(){return r.e(0).then(r.bind(null,265))}},props:{dialogType:{type:String,default:function e(){return"creator"}}},data:function e(){return{config:{editor:{title:"编辑组",groupNameDisabled:true},creator:{title:"新增组"}},visible:false,formData:{secretaries:[],group_id:"",group_full_name:""},rules:Object.freeze({name:[{required:true,message:"请输入组织名",trigger:"blur"}],level:[{required:true,message:"请选择奖项等级",trigger:"blur"}],secretaries:[{required:true,message:"请选择奖项负责人",trigger:"blur"}],organisation:[{required:true,message:"请输入组织名",trigger:"blur"}]}),settings:[{prop:"name",label:"组织名"},{prop:"level",label:"级别"},{prop:"master",label:"负责人"}],totalMaster:[],totalDepartment:[]}},computed:{secretaries:{get:function e(t){return t.formData.secretaries.map(function(e){return e.username})},set:function e(t){this.formData.secretaries=this.$http.cache.get(o.GROUP_USERS_KEYNAME).filter(function(e){return t.includes(e["username"])})}},groupInfo:{get:function e(t){return t.formData.group_id},set:function e(t){var r=this.formData;var a=this.$http.cache.get(o.GROUP_KEYNAME);r.group_id=t;r.group_full_name=a.find(function(e){return e.id===t})["full_name"]}}},created:function e(){this.handleInit()},methods:{handleInit:function e(){},checkValid:function e(){var t=this.$refs["form"];return new Promise(function(e){t.validate().then(function(t){e(true)}).catch(function(t){e(false)})})},handleDialogConfirm:function e(t){var r=this;return(0,u.default)(i.default.mark(function e(){return i.default.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return r.checkValid();case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:r.$emit("confirm",r.formData);case 5:case"end":return t.stop()}}},e)}))()},handleDialogCancel:function e(t){this.$emit("cancel",t);this.hidden()},show:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{data:null,callback:function e(){}};if(t.data){this.formData=s({},t.data)}this.visible=true},hidden:function e(){this.visible=false;this.formData={secretaries:[],group_id:"",group_full_name:""}}}};t.default=f},248:function(e,t,r){},301:function(e,t,r){"use strict";r.r(t);var a=r(335);var n=r(246);for(var i in n)if(i!=="default")(function(e){r.d(t,e,function(){return n[e]})})(i);var u=r(302);var o=r(3);var l=Object(o["a"])(n["default"],a["a"],a["b"],false,null,"42b14fa7",null);t["default"]=l.exports},302:function(e,t,r){"use strict";var a=r(248);var n=r.n(a);var i=n.a},335:function(e,t,r){"use strict";var a=function(){var e=this;var t=e.$createElement;var r=e._self._c||t;return r("div",{staticClass:"dialog-container"},[r("bk-dialog",{attrs:{"render-directive":"if",theme:"primary","header-position":"left",size:"small","ext-cls":"dialog","mask-close":false,loading:e.$attrs["loading"],"confirm-fn":e.handleDialogConfirm},on:{cancel:function(t){e.handleDialogCancel(e.formData)}},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[r("p",{staticClass:"dialog-title f17 fb",attrs:{slot:"header"},slot:"header"},[e._v("\n            "+e._s(e.config[e.dialogType].title)+"\n        ")]),e._v(" "),e.visible?r("bk-form",{ref:"form",attrs:{"label-width":80,model:e.formData,rules:e.rules}},[r("bk-form-item",{attrs:{label:"组名称",required:true,property:"name"}},[r("select-search",{attrs:{placeholder:"请选择现有组织",value:e.groupInfo,type:"group",multiple:false,disabled:e.config[e.dialogType]["groupNameDisabled"]},on:{"update:value":function(t){e.groupInfo=t}}})],1),e._v(" "),r("bk-form-item",{attrs:{label:"负责人",required:true,property:"master"}},[r("select-search",{attrs:{placeholder:"请选择申请人",value:e.secretaries},on:{"update:value":function(t){e.secretaries=t}}})],1)],1):e._e(),e._v("\n        "+e._s(e.config[e.type])+"\n    ")],1)],1)};var n=[];r.d(t,"a",function(){return a});r.d(t,"b",function(){return n})}}]);