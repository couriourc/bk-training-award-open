(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{212:function(t,a,e){"use strict";var n=e(1);Object.defineProperty(a,"__esModule",{value:true});a.deleteRecord=c;a.getAvailableAwards=l;a.getAwardById=p;a.getAwards=s;a.postAwards=u;a.postFinishAward=w;a.postRecord=_;a.putAward=f;var r=n(e(4));var d=n(e(3));function i(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);a&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,n)}return e}function o(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?i(Object(e),!0).forEach(function(a){(0,r.default)(t,a,e[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))})}return t}function u(t){return d.default.post("awards/",t)}function s(t){var a=t.page,e=t.size,n=t.group_id,r=t.award_status;return d.default.get("awards/",{params:{page:a,size:e,group_id:n,award_status:r}})}function l(t){var a=t.page,e=t.size,n=t.award_status,r=t.group_id;return d.default.get("get_available_awards/",{params:{page:a,size:e,award_status:n,group_id:r}})}function _(t,a){return d.default.post("record/",o({is_draft:t},a))}function c(t){console.log(t);return d.default.delete("record/",{data:{id:t}})}function f(t,a){var e=a.award_name,n=a.award_level,r=a.award_description,i=a.award_consultant,o=a.award_image,u=a.award_department_fullname,s=a.award_reviewers,l=a.start_time,_=a.end_time,c=a.award_department_id,f=a.award_consultant_displayname,p=a.award_demand;return d.default.put("awards/",{award_id:t,award_name:e,award_level:n,award_description:r,award_consultant:i,award_image:o,award_department_fullname:u,award_reviewers:s,start_time:l,end_time:_,award_department_id:c,award_consultant_displayname:f,award_demand:p})}function p(t){return d.default.get("/awards/".concat(t,"/"))}function w(t){return d.default.post("/finish_award/".concat(t,"/"))}},214:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:true});a.tableMixins=void 0;var n={data:function t(){return{pagination:{count:0,limit:10,current:1},loading:false}}};a.tableMixins=n},286:function(t,a,e){"use strict";e.r(a);var n=e(287);var r=e.n(n);for(var d in n)if(d!=="default")(function(t){e.d(a,t,function(){return n[t]})})(d);a["default"]=r.a},287:function(t,a,e){"use strict";var n=e(1);Object.defineProperty(a,"__esModule",{value:true});a.default=void 0;var r=n(e(4));var d=e(214);var i=e(212);var o=e(8);var u={name:"pending-start",mixins:[d.tableMixins],data:function t(){return{pendingStartRemoteData:[]}},computed:{pendingStartData:function t(a){var e,n;return(e=(n=a.pendingStartRemoteData)===null||n===void 0?void 0:n.map(function(t){return{award_id:t["id"],award_name:t["award_name"],award_description:t["award_description"],award_department_fullname:t["award_department_fullname"],award_department_id:t["award_department_id"],award_reviewers:t["award_reviewers"],award_consultant:t["award_consultant"],award_consultant_displayname:t["award_consultant_displayname"],award_consultant_displayname_for_display:t["award_consultant"]+"（"+t["award_consultant_displayname"]+"）",award_demand:t["award_demand"],start_time:t["start_time"],end_time:t["end_time"],approval_state:t["approval_state"]}}))!==null&&e!==void 0?e:[]}},mounted:function t(){this.handleInit()},methods:{handleInit:function t(){Promise.all([this.handleGetPendingStartAwards()])},handleGetPendingStartAwards:function t(){var a=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.pagination.current;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.pagination.size;if(this.loading)return;this.loading=true;var r={page:e,size:n,award_status:o.PENDING_START,group_id:this.$bus.curGlobalGroupId};return(0,i.getAwards)(r).then(function(t){var e=t.data;a.pagination.count=e.count;a.pendingStartRemoteData=e.data}).finally(function(t){a.loading=false})},handleToEditAward:function t(a){var e;this.$router.push({name:o.AWARD_FORM_ROUTE_PATH,query:(e={},(0,r.default)(e,o.AWARD_TYPE_ROUTE_KEY,o.AWARD_TYPE_EDIT),(0,r.default)(e,"award_id",a["award_id"]),e)})}}};a.default=u},354:function(t,a,e){"use strict";e.r(a);var n=e(395);var r=e(286);for(var d in r)if(d!=="default")(function(t){e.d(a,t,function(){return r[t]})})(d);var i=e(7);var o=Object(i["a"])(r["default"],n["a"],n["b"],false,null,null,null);a["default"]=o.exports},395:function(t,a,e){"use strict";var n=function(){var t=this;var a=t.$createElement;var e=t._self._c||a;return e("self-table",{attrs:{data:t.pendingStartData,loading:t.loading,pagination:t.pagination},on:{"update:pagination":function(a){t.pagination=a},"page-change":function(a){t.handleInit()}}},[e("bk-table-column",{attrs:{type:"index",label:"序号",width:60}}),t._v(" "),e("bk-table-column",{attrs:{label:"奖项名称"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{attrs:{title:a.row["award_name"]},domProps:{textContent:t._s(a.row["award_name"])}})]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:"奖项开始时间"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{attrs:{title:a.row["start_time"]},domProps:{textContent:t._s(a.row["start_time"])}})]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:"奖项截止时间"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{attrs:{title:a.row["end_time"]},domProps:{textContent:t._s(a.row["end_time"])}})]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:"奖项咨询人"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{attrs:{title:a.row["award_consultant_displayname_for_display"]}},[t._v(t._s(a.row["award_consultant_displayname_for_display"]))])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:"评审轮次",width:300},scopedSlots:t._u([{key:"default",fn:function(a){return[e("bk-select",{attrs:{value:0,clearable:false}},t._l(a.row["award_reviewers"],function(t,a){return e("bk-option",{key:t,attrs:{name:"第"+(a+1)+"轮:"+t.join(","),id:a,title:"第"+(a+1)+"轮:"+t.join(",")}})}),1)]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("bk-button",{attrs:{text:true},on:{click:function(e){t.handleToEditAward(a.row)}}},[t._v("编辑奖项")])]}}])})],1)};var r=[];e.d(a,"a",function(){return n});e.d(a,"b",function(){return r})}}]);