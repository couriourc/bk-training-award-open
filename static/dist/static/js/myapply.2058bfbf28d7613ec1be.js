(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{200:function(t,e,a){"use strict";a.r(e);var r=a(333);var n=a(226);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);var o=a(293);var l=a(3);var s=Object(l["a"])(n["default"],r["a"],r["b"],false,null,"7b7b8ff5",null);e["default"]=s.exports},201:function(t,e,a){"use strict";a.r(e);var r=a(331);var n=a(229);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);var o=a(294);var l=a(3);var s=Object(l["a"])(n["default"],r["a"],r["b"],false,null,"207dbc92",null);e["default"]=s.exports},202:function(t,e,a){"use strict";a.r(e);var r=a(329);var n=a(232);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);var o=a(295);var l=a(3);var s=Object(l["a"])(n["default"],r["a"],r["b"],false,null,null,null);e["default"]=s.exports},203:function(t,e,a){"use strict";a.r(e);var r=a(327);var n=a(235);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);var o=a(296);var l=a(3);var s=Object(l["a"])(n["default"],r["a"],r["b"],false,null,"858c5c10",null);e["default"]=s.exports},206:function(t,e,a){"use strict";var r=a(1);Object.defineProperty(e,"__esModule",{value:true});e.REVIEW_PENDING=e.REVIEW_PASSED=e.REVIEW_NOT_PASSED=e.NOT_APPLY=e.GROUP_USERS_KEYNAME=e.GROUP_KEYNAME=e.ENDED=e.DRAFT=e.AWARD_LEVEL_MAP=e.AWARD_LEVEL_EN_MAP=e.AWARD_APPROVAL_STATE_MAP=e.AWARD_APPROVAL_STATE_EN_MAP=e.APPROVAL_STATE=e.APPLY_APPROVAL_STATE_MAP=e.APPLY_APPROVAL_STATE_EN_MAP=e.APPLYED=void 0;var n=r(a(5));var i,o,l,s,u,c,p;var d=0;e.NOT_APPLY=d;var f=1;e.APPLYED=f;var v=2;e.ENDED=v;var m=(i={},(0,n.default)(i,d,d),(0,n.default)(i,f,f),i);e.APPROVAL_STATE=m;var _=(o={},(0,n.default)(o,d,"未开始"),(0,n.default)(o,f,"申请中"),(0,n.default)(o,v,"已结束"),o);e.AWARD_APPROVAL_STATE_MAP=_;var b=(l={},(0,n.default)(l,d,"not_apply"),(0,n.default)(l,f,"applyied"),(0,n.default)(l,v,"ended"),l);e.AWARD_APPROVAL_STATE_EN_MAP=b;var g=0;e.REVIEW_PENDING=g;var h=1;e.REVIEW_PASSED=h;var y=2;e.REVIEW_NOT_PASSED=y;var w=3;e.DRAFT=w;var A=(s={},(0,n.default)(s,g,"待评审"),(0,n.default)(s,h,"评审通过"),(0,n.default)(s,y,"评审不通过"),(0,n.default)(s,w,"草稿"),s);e.APPLY_APPROVAL_STATE_MAP=A;var P=(u={},(0,n.default)(u,g,"review_pending"),(0,n.default)(u,h,"review_passed"),(0,n.default)(u,y,"review_not_passed"),(0,n.default)(u,w,"draft"),u);e.APPLY_APPROVAL_STATE_EN_MAP=P;var O=0;var k=1;var S=(c={},(0,n.default)(c,O,"公司"),(0,n.default)(c,k,"小组"),c);e.AWARD_LEVEL_MAP=S;var E=(p={},(0,n.default)(p,O,"company"),(0,n.default)(p,k,"group"),p);e.AWARD_LEVEL_EN_MAP=E;var D="groupUser";e.GROUP_USERS_KEYNAME=D;var x="group";e.GROUP_KEYNAME=x},207:function(t,e,a){"use strict";var r=a(1);Object.defineProperty(e,"__esModule",{value:true});e.deleteAward=v;e.deleteRecord=f;e.getAppliedAwards=p;e.getAvailableAwards=c;e.getAwards=u;e.postAwards=s;e.postRecord=d;e.putAward=m;var n=r(a(5));var i=r(a(15));function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,r)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach(function(e){(0,n.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function s(t){return i.default.post("awards/",t)}function u(t,e){return i.default.get("awards/",{params:{page:t,size:e}})}function c(t,e){return i.default.get("get_available_awards/",{params:{page:t,size:e}})}function p(t,e){return i.default.get("get_applyed_awards/",{params:{page:t,size:e}})}function d(t,e){return i.default.post("record/",l({is_draft:t},e))}function f(t){return i.default.post("record/",{id:t})}function v(t){var e=t.awardId;return i.default.delete("awards/",{params:{award_id:e}})}function m(t,e){var a=e.award_name,r=e.award_level,n=e.award_description,o=e.award_consultant,l=e.award_image,s=e.award_department_fullname,u=e.award_reviewers,c=e.start_time,p=e.end_time;return i.default.put("awards/",{award_id:t,award_name:a,award_level:r,award_description:n,award_consultant:o,award_image:l,award_department_fullname:s,award_reviewers:u,start_time:c,end_time:p})}},226:function(t,e,a){"use strict";a.r(e);var r=a(227);var n=a.n(r);for(var i in r)if(i!=="default")(function(t){a.d(e,t,function(){return r[t]})})(i);e["default"]=n.a},227:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var r=a(207);var n=a(280);var i={components:{},data:function t(){return{userInfo:null,size:"small",departValue:"",data:[],pagination:{current:1,count:0,limit:10},isLoading:false}},created:function t(){this.handleGetPageData()},methods:{handleGetPageData:function t(e,a){var r=this;this.isLoading=true;return(0,n.getRecord)(e,a).then(function(t){console.log(t)}).finally(function(t){r.isLoading=false})},handleToDelApply:function t(e){var a=this;return(0,r.deleteRecord)(e).then(function(t){a.messageSuccess("删除成功")})}}};e.default=i},228:function(t,e,a){},229:function(t,e,a){"use strict";a.r(e);var r=a(230);var n=a.n(r);for(var i in r)if(i!=="default")(function(t){a.d(e,t,function(){return r[t]})})(i);e["default"]=n.a},230:function(t,e,a){"use strict";var r=a(1);Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var n=r(a(5));var i=a(280);var o=a(206);function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,r)}return a}function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach(function(e){(0,n.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var u={data:function t(){return{userInfo:null,size:"small",departValue:"",remoteData:[],pagination:{current:1,count:0,limit:10,award_name:[],department_name:[]},award_approval_state_controller:(0,n.default)({},o.NOT_APPLY,"待审批")}},computed:{tableData:function t(e){var a,r;return(a=(r=e.remoteData)===null||r===void 0?void 0:r.map(function(t){return s(s({},t),{},{approval_state_cn:o.AWARD_APPROVAL_STATE_MAP[t["approval_state"]],approval_state_en:o.AWARD_APPROVAL_STATE_EN_MAP[t["approval_state"]]})}))!==null&&a!==void 0?a:[]}},created:function t(){this.handleInit()},methods:{handleInit:function t(){this.handleGetPageData()},handleChangePage:function t(e){this.pagination.current=e;this.handleGetPageData()},handleChangeLimit:function t(e){this.pagination.current=1;this.pagination.limit=e;this.handleGetPageData()},handleGetPageData:function t(){var e=this;var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.pagination.current;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.pagination.limit;return(0,i.getApproval)(a,r).then(function(t){console.log(t);e.remoteData=t.data["results"];e.pagination=t.data["count"]})}}};e.default=u},231:function(t,e,a){},232:function(t,e,a){"use strict";a.r(e);var r=a(233);var n=a.n(r);for(var i in r)if(i!=="default")(function(t){a.d(e,t,function(){return r[t]})})(i);e["default"]=n.a},233:function(t,e,a){"use strict";var r=a(1);Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var n=r(a(5));var i=a(23);var o=a(207);function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,r)}return a}function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach(function(e){(0,n.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var u={name:"detail",components:{Detail:function t(){return a.e(22).then(a.bind(null,315))},ApplyForm:function t(){return a.e(21).then(a.bind(null,317))}},props:{type:{type:String,default:function t(){return null}}},data:function t(){return{formType:"detail",isShow:false,applyForm:{}}},computed:s(s({},(0,i.mapGetters)(["user"])),{},{isShowApplyForm:function t(){return["apply","edit"].includes(this.formType)},defaultInfo:function t(){return{award_apply_record_id:this.applyForm.award_apply_record_id,award_id:this.applyForm.id}}}),created:function t(){console.log(this.$route.params);this.applyForm=this.$route.params;this.formType=this.$route.params["type"]},methods:{handleToSaveApplyForm:function t(e){this.handleToDealWidthApply(true,e).then(function(t){console.log("res",t)})},handleToSendApplyForm:function t(e){this.handleToDealWidthApply(false,e).then(function(t){console.log("res",t)})},handleToDealWidthApply:function t(e,a){var r=this.defaultInfo;var n=a.getFields();if(!n){return}return(0,o.postRecord)(e,s(s({},n),r))}}};e.default=u},234:function(t,e,a){},235:function(t,e,a){"use strict";a.r(e);var r=a(236);var n=a.n(r);for(var i in r)if(i!=="default")(function(t){a.d(e,t,function(){return r[t]})})(i);e["default"]=n.a},236:function(t,e,a){"use strict";var r=a(1);Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var n=r(a(21));var i=r(a(16));var o=r(a(22));var l={components:{},data:function t(){return{userInfo:null,size:"small",departValue:"",awardName:"全国大学生数学建模大赛",remoteData:[{apply_user:"边成",source:"公司",materials:"材料1、材料二",class:"部门",create_time:"2018-05-25 15:02:24",end_time:"2018-05-25 15:02:24",text:""}],pagination:{current:1,count:0,limit:10},mystyle:{height:"15px",width:"100%"},exampleSetting1:{primary:{visible:false,headerPosition:"left",title:"",message:"",notify:"",data:null}}}},computed:{tableData:function t(){var e;var a=this.remoteData;return a===null||a===void 0?void 0:(e=a.map)===null||e===void 0?void 0:e.call(a,function(t){return{}})}},created:function t(){},methods:{getUser:function t(){var e=this;return(0,o.default)(n.default.mark(function t(){var a;return n.default.wrap(function t(r){while(1){switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return e.$store.dispatch("userInfo",{},{fromCache:true});case 3:a=r.sent;e.userInfo=(0,i.default)({},a);r.next=10;break;case 7:r.prev=7;r.t0=r["catch"](0);console.error(r.t0);case 10:case"end":return r.stop()}}},t,null,[[0,7]])}))()},handlePageLimitChange:function t(){console.log("handlePageLimitChange",arguments)},toggleTableSize:function t(){var e=["small","medium","large"];var a=(e.indexOf(this.size)+1)%3;this.size=e[a]},handlePageChange:function t(e){this.pagination.current=e},consent:function t(e){console.log(e);this.exampleSetting1.primary.data=e;this.exampleSetting1.primary.title="通过评审";this.exampleSetting1.primary.message="请问是否确定评审通过?";this.exampleSetting1.primary.notify="";this.exampleSetting1.primary.visible=true},disconsent:function t(e){console.log(e);this.exampleSetting1.primary.data=e;this.exampleSetting1.primary.title="不通过评审";this.exampleSetting1.primary.notify="请输入审核失败的原因";this.exampleSetting1.primary.message="请问是否确定评审不通过?";this.exampleSetting1.primary.visible=true},listChange:function t(e){console.log(e)},clickconfirm:function t(){},cancel:function t(){console.log("cancel")}}};e.default=l},237:function(t,e,a){},280:function(t,e,a){"use strict";var r=a(1);Object.defineProperty(e,"__esModule",{value:true});e.getApproval=i;e.getRecord=o;e.postApproval=l;var n=r(a(15));function i(t,e){return n.default.get("/approval/",{params:{page:t,size:e}})}function o(t,e){return n.default.get("record/",{params:{page:t,size:e}})}function l(t){var e=t.id,a=t.action,r=t.approval_text;return n.default.post("/approval/",{id:e,action:a,approval_text:r})}},293:function(t,e,a){"use strict";var r=a(228);var n=a.n(r);var i=n.a},294:function(t,e,a){"use strict";var r=a(231);var n=a.n(r);var i=n.a},295:function(t,e,a){"use strict";var r=a(234);var n=a.n(r);var i=n.a},296:function(t,e,a){"use strict";var r=a(237);var n=a.n(r);var i=n.a},327:function(t,e,a){"use strict";var r=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{},[a("bk-dialog",{attrs:{theme:"primary","mask-close":false,"header-position":t.exampleSetting1.primary.headerPosition,title:t.exampleSetting1.primary.title},on:{confirm:t.clickconfirm,cancel:t.cancel},model:{value:t.exampleSetting1.primary.visible,callback:function(e){t.$set(t.exampleSetting1.primary,"visible",e)},expression:"exampleSetting1.primary.visible"}},[[a("textarea",{staticStyle:{"margin-bottom":"15px"},attrs:{rows:"3",cols:"45",placeholder:t.exampleSetting1.primary.notify}})],t._v("\n        "+t._s(t.exampleSetting1.primary.message)+"\n    ")],2),t._v(" "),a("div",[a("span",{staticClass:"depart-name",staticStyle:{"margin-right":"10px"}},[t._v("奖项名称")]),t._v(" "),a("span",{staticClass:"depart-name",staticStyle:{"margin-right":"10px","font-size":"17px"}},[t._v(t._s(t.awardName))])]),t._v(" "),a("div",[a("bk-table",{staticStyle:{"margin-top":"15px"},attrs:{data:t.tableData,size:t.size,pagination:t.pagination},on:{"page-change":t.handlePageChange,"page-limit-change":t.handlePageLimitChange}},[a("bk-table-column",{attrs:{type:"index",label:"序列",width:"150"}}),t._v(" "),a("bk-table-column",{attrs:{label:"申请人",prop:"apply_user",width:"200"}}),t._v(" "),a("bk-table-column",{attrs:{label:"申报理由",prop:"source",width:"350"}}),t._v(" "),a("bk-table-column",{attrs:{label:"申请材料",prop:"materials",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("bk-button",{staticClass:"mr10",attrs:{theme:"primary",text:""},on:{click:function(a){t.reset(e.row)}}},[t._v(t._s(e.row.materials))])]}}])}),t._v(" "),a("bk-table-column",{attrs:{label:"评审操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("bk-button",{staticClass:"mr10",attrs:{theme:"primary",text:"",disabled:e.row.source==="创建中"},on:{click:function(a){t.consent(e.row)}}},[t._v("通过")]),t._v(" "),a("bk-button",{staticClass:"mr10",attrs:{theme:"primary",text:""},on:{click:function(a){t.disconsent(e.row)}}},[t._v("不通过")])]}}])})],1)],1)],1)};var n=[];a.d(e,"a",function(){return r});a.d(e,"b",function(){return n})},329:function(t,e,a){"use strict";var r=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{staticClass:"detail-container m20",attrs:{"show-head":false}},[a("div",[a("Detail",{attrs:{"award-form":t.applyForm}}),t._v(" "),t.isShowApplyForm?a("ApplyForm",{ref:"applyForm",attrs:{id:t.applyForm["id"]}}):t._e()],1),t._v(" "),a("div",{staticClass:"tc w100  mt15"},[t.isShowApplyForm?a("div",{staticClass:"button-item"},[a("bk-button",{staticClass:"mr10",attrs:{theme:"success","ext-cls":"button-item"},on:{click:function(e){t.handleToSendApplyForm(t.$refs["applyForm"])}}},[a("bk-icon",{attrs:{type:"check-circle"}}),t._v(" "),a("span",[t._v("发起申请")])],1),t._v(" "),a("bk-button",{staticClass:"mr10",attrs:{theme:"primary","ext-cls":"button-item"},on:{click:function(e){t.handleToSaveApplyForm(t.$refs["applyForm"])}}},[a("bk-icon",{attrs:{type:"save"}}),t._v(" "),a("span",[t._v("保存草稿")])],1),t._v(" "),a("bk-button",{staticClass:"mr10",attrs:{theme:"warning","ext-cls":"button-item"},on:{click:function(e){t.$router.back()}}},[a("bk-icon",{attrs:{type:"minus-circle"}}),t._v(" "),a("span",[t._v("取消")])],1)],1):a("div",{staticClass:"tc mr15 mt15"},[a("bk-button",{staticClass:"mr10",attrs:{theme:"primary","icon-right":"arrows-right-circle"},on:{click:function(e){t.formType="apply"}}},[a("span",{staticClass:"m5"},[t._v("前往申请")])]),t._v(" "),a("bk-button",{staticClass:"ml10",attrs:{theme:"warning","icon-right":"close-circle"},on:{click:function(e){t.$router.back()}}},[a("span",{staticClass:"m5"},[t._v("取消")])])],1)])])};var n=[];a.d(e,"a",function(){return r});a.d(e,"b",function(){return n})},331:function(t,e,a){"use strict";var r=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{},[a("div",[a("bk-table",{staticClass:"mt10",attrs:{pagination:t.pagination,data:t.tableData},on:{"page-change":function(e){t.handleChangePage(e)},"page-limit-change":function(e){t.handleChangeLimit(e)}}},[a("bk-table-column",{attrs:{label:"奖项id",prop:"award_name"}}),t._v(" "),a("bk-table-column",{attrs:{label:"申请时间",prop:"application_time"}}),t._v(" "),a("bk-table-column",{attrs:{label:"申请理由",prop:"application_reason"}}),t._v(" "),a("bk-table-column",{attrs:{label:"申请人",prop:"application_users"}}),t._v(" "),a("bk-table-column",{attrs:{label:"审批人",prop:"end_time"}}),t._v(" "),a("bk-table-column",{attrs:{label:"审批状态",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("bk-button",{class:["mr10",e.row["approval_state_en"]],attrs:{theme:"primary",text:""},on:{click:function(a){t.check(e.row)}}})]}}])})],1)],1)])};var n=[];a.d(e,"a",function(){return r});a.d(e,"b",function(){return n})},333:function(t,e,a){"use strict";var r=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{staticClass:"my-apply-container"},[a("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.isLoading},expression:"{ isLoading: isLoading }"}],staticStyle:{"margin-top":"15px"},attrs:{data:t.data,size:t.size,pagination:t.pagination},on:{"page-change":function(e){t.handleGetPageData(e,t.pagination.limit)},"page-limit-change":function(e){t.handleGetPageData(t.pagination.current,e)}}},[a("bk-table-column",{attrs:{label:"奖项名称",prop:"award_name",width:"350"}}),t._v(" "),a("bk-table-column",{attrs:{label:"申请时间",prop:"create_time",width:"350"}}),t._v(" "),a("bk-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.status==="待审核"?a("span",{staticClass:"status",staticStyle:{"background-color":"rgb(86, 137, 203)"}},[t._v(t._s(e.row.status))]):t._e(),t._v(" "),e.row.status==="已通过"?a("span",{staticClass:"status",staticStyle:{"background-color":"rgb(80, 176, 122)"}},[t._v(t._s(e.row.status))]):t._e(),t._v(" "),e.row.status==="不通过"?a("span",{staticClass:"status",staticStyle:{"background-color":"rgb(234, 81, 81)"}},[t._v(t._s(e.row.status))]):t._e(),t._v(" "),e.row.status==="草稿"?a("span",{staticClass:"status",staticStyle:{"background-color":"rgb(255, 149, 181)"}},[t._v(t._s(e.row.status))]):t._e()]}}])}),t._v(" "),a("bk-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("bk-popconfirm",{attrs:{title:"确认撤销申请该奖项（"+e.row["award_name"]+"）？",trigger:"click",content:"删除操作无法撤回，请谨慎操作！"},on:{confirm:function(a){t.handleToDelApply(e.row["id"])}}},[e.row.approval_state===0?a("bk-button",{staticClass:"mr10",attrs:{theme:"primary",text:""}},[t._v("撤回申请")]):t._e()],1),t._v(" "),e.row.approval_state===3?a("bk-button",{staticClass:"mr10",attrs:{theme:"primary",text:""},on:{click:function(a){t.handleToDelApply(e.row)}}},[t._v("发起申请")]):t._e(),t._v(" "),e.row.approval_state===3?a("bk-button",{staticClass:"mr10",attrs:{theme:"primary",text:""},on:{click:function(a){t.handleToDelApply(e.row)}}},[t._v("编辑申请")]):t._e(),t._v(" "),e.row.approval_state===1?a("bk-button",{staticClass:"mr10",attrs:{disabled:true,text:"","ext-cls":"text-dark"}},[t._v("--")]):t._e(),t._v(" "),a("bk-button",{directives:[{name:"show",rawName:"v-show",value:e.row.status===2,expression:"props.row.status === 2"}],staticClass:"mr10",attrs:{theme:"primary",text:""},on:{click:function(a){t.handleToDelApply(e.row)}}},[t._v("重新申请")])]}}])})],1)],1)};var n=[];a.d(e,"a",function(){return r});a.d(e,"b",function(){return n})}}]);