(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{204:function(t,e,a){"use strict";a.r(e);var n=a(379);var r=a(246);for(var i in r)if(i!=="default")(function(t){a.d(e,t,function(){return r[t]})})(i);var o=a(334);var u=a(7);var s=Object(u["a"])(r["default"],n["a"],n["b"],false,null,"39db9f36",null);e["default"]=s.exports},212:function(t,e,a){"use strict";var n=a(1);Object.defineProperty(e,"__esModule",{value:true});e.deleteAward=h;e.deleteRecord=p;e.getAppliedAwards=c;e.getAvailableAwards=l;e.getAwardById=v;e.getAwards=d;e.postAwards=s;e.postRecord=f;e.putAward=w;var r=n(a(4));var i=n(a(3));function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach(function(e){(0,r.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function s(t){return i.default.post("awards/",t)}function d(t){var e=t.page,a=t.size;return i.default.get("awards/",{params:{page:e,size:a}})}function l(t){var e=t.page,a=t.size,n=t.award_status,r=t.group_id;return i.default.get("get_available_awards/",{params:{page:e,size:a,award_status:n,group_id:r}})}function c(t,e){return i.default.get("get_applyed_awards/",{params:{page:t,size:e}})}function f(t,e){return i.default.post("record/",u({is_draft:t},e))}function p(t){console.log(t);return i.default.delete("record/",{data:{id:t}})}function h(t){var e=t.awardId;return i.default.delete("awards/",{data:{award_id:e}})}function w(t,e){var a=e.award_name,n=e.award_level,r=e.award_description,o=e.award_consultant,u=e.award_image,s=e.award_department_fullname,d=e.award_reviewers,l=e.start_time,c=e.end_time;return i.default.put("awards/",{award_id:t,award_name:a,award_level:n,award_description:r,award_consultant:o,award_image:u,award_department_fullname:s,award_reviewers:d,start_time:l,end_time:c})}function v(t){return i.default.get("/awards/".concat(t,"/"))}},220:function(t,e,a){"use strict";var n=a(1);Object.defineProperty(e,"__esModule",{value:true});Object.defineProperty(e,"tableMixins",{enumerable:true,get:function t(){return r.default}});var r=n(a(221))},221:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var n={data:function t(){return{remoteData:[],pagination:{current:1,count:0,limit:10},tableDataIsLoading:false,tableDataUrl:""}},methods:{handlePageSizeChange:function t(e){this.pagination.current=1;this.pagination.limit=e;this.handleGetPageData(this.pagination.current,e)},handleCurrentChange:function t(e){this.pagination.current=e;this.handleGetPageData(e,this.pagination.limit)},handleGetPageData:function t(e,a){var n=this;var r=this.tableDataUrl;this.tableDataIsLoading=true;return this.$http.get(r).then(function(t){n.remoteData=t.data.results}).finally(function(t){n.tableDataIsLoading=false})}}};e.default=n},246:function(t,e,a){"use strict";a.r(e);var n=a(247);var r=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=r.a},247:function(t,e,a){"use strict";var n=a(1);Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var r=n(a(16));var i=n(a(4));var o=a(220);var u=a(8);var s=a(212);var d=n(a(0));function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach(function(e){(0,i.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var f={name:"award-manager",components:{PendingStart:function t(){return a.e(35).then(a.bind(null,352))},IngAward:function t(){return a.e(33).then(a.bind(null,353))},IngReview:function t(){return a.e(34).then(a.bind(null,354))},EndedReview:function t(){return a.e(32).then(a.bind(null,355))}},mixins:[o.tableMixins],data:function t(){return{workbench:"pending-start",awardListTabItems:[{"tab-name":"待开始","tab-key":"pending-start"},{"tab-name":"已开始","tab-key":"ing-award"},{"tab-name":"评审中","tab-key":"ing-review"},{"tab-name":"已结束","tab-key":"ended-review"}],tableSettings:{awardName:"奖项名称",awardStatus:"状态",startApplyTime:"开始申请时间",endApplyTime:"截止申请时间"},isDialogShow:false,remoteData:[],formData:{},selectData:[],checkData:{}}},computed:{tableData:function t(e){var a,n,r;return(a=(n=e.remoteData)===null||n===void 0?void 0:(r=n.map)===null||r===void 0?void 0:r.call(n,function(t){var e;var a=(0,d.default)(t["start_time"]);var n=(0,d.default)(t["end_time"]);var r=(0,d.default)();if(a.diff(r)>=0){e=u.NOT_APPLY}else if(n.diff(r)<=0){e=u.ENDED}else{e=u.APPLYED}return c(c({},t),{},{awardName:t["award_name"],approval_state:e,awardStatus:u.AWARD_APPROVAL_STATE_MAP[e],startApplyTime:t["start_time"],endApplyTime:t["end_time"]})}))!==null&&a!==void 0?a:[]}},created:function t(){this.handleInit()},mounted:function t(){},methods:{handleInit:function t(){var e;var a=this.workbench;(e=this.$refs[a])===null||e===void 0?void 0:e.handleInit()},toAddNewAward:function t(){this.$router.push({name:"award-form",query:{type:"new"}})},toBatchClone:function t(e,a){if(!a.length){this.messageError("请先选择奖项");return null}e.show()},toSendEmail:function t(e,a){if(!a.length){this.messageError("请先选择奖项");return null}e.show()},toBatchExport:function t(e){},toSendNotification:function t(e){e.show()},toEditRow:function t(e){return this.$router.push({name:"award-form",query:{type:"edit"},params:c({},e)})},toGetDetail:function t(e){return this.$router.push({name:"award-form",query:{type:"detail"},params:c({},e)})},toEndAward:function t(e,a){a.show()},confirmDelAward:function t(e){var a=this;console.log(e);return(0,s.deleteAward)({awardId:e["id"]}).then(function(t){a.handleInit();a.messageSuccess("删除成功")})},handleSetSelectData:function t(e){this.selectData=(0,r.default)(e)},handlePageSizeChange:function t(e){this.pagination.current=1;this.pagination.limit=e;this.handleGetPageData(this.pagination.current,e)},handleCurrentChange:function t(e){this.pagination.current=e;this.handleGetPageData(e,this.pagination.limit)},handleGetPageData:function t(){var e=this;var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.pagination.current;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.pagination.limit;this.isLoading=true;return(0,s.getAwards)(a,n).then(function(t){e.remoteData=t.data["data"];e.pagination.count=t.data["count"]}).finally(function(t){e.isLoading=false})}}};e.default=f},248:function(t,e,a){},334:function(t,e,a){"use strict";var n=a(248);var r=a.n(n);var i=r.a},379:function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{staticClass:"award-container"},[a("top-back"),t._v(" "),a("div",{staticClass:"header-controller-panel mt15 mb20"},[a("select-search",{staticStyle:{width:"calc(2*118px + 1*8px)","font-size":"15px"},attrs:{behavior:"simplicity",placeholder:"请选择小组",value:t.$bus.curGlobalGroupId,type:"group","id-key":"group_id",multiple:false},on:{"update:value":function(e){t.$set(t.$bus,"curGlobalGroupId",e)},change:function(e){t.handleInit()}}})],1),t._v(" "),t.$bus.isCurGroupAdmin?a("tabs",{staticClass:"mt15",attrs:{"tab-items":t.awardListTabItems},model:{value:t.workbench,callback:function(e){t.workbench=e},expression:"workbench"}},[[a(t.workbench,{ref:t.workbench,tag:"component"})]],2):a("empty",[a("div",{attrs:{slot:"description"},slot:"description"},[a("p",{staticClass:"mb20"},[t._v("不好意思，您不是该组管理员~")]),t._v("\n            请联系本组（"+t._s(t.$bus.curGlobalSelectedGroup["full_name"])+"）管理员: "),a("span",{staticStyle:{color:"#cc1111"}},[t._v("\n                "+t._s(t.$bus.curGlobalSelectedGroup["secretary_display_name_for_dispaly"])+"\n            ")])])])],1)};var r=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return r})}}]);