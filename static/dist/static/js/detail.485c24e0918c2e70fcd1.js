(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{199:function(a,t,r){"use strict";r.r(t);var e=r(385);var o=r(240);for(var p in o)if(p!=="default")(function(a){r.d(t,a,function(){return o[a]})})(p);var l=r(335);var n=r(18);var i=Object(n["a"])(o["default"],e["a"],e["b"],false,null,"26d0621c",null);t["default"]=i.exports},240:function(a,t,r){"use strict";r.r(t);var e=r(241);var o=r.n(e);for(var p in e)if(p!=="default")(function(a){r.d(t,a,function(){return e[a]})})(p);t["default"]=o.a},241:function(a,t,r){"use strict";var e=r(1);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var o=e(r(11));var p=e(r(12));var l=r(7);var n=r(209);var i={name:"detail",components:{DetailInfo:function a(){return Promise.all([r.e(0),r.e(22)]).then(r.bind(null,367))},ApplyForm:function a(){return Promise.all([r.e(0),r.e(21)]).then(r.bind(null,369))}},props:{type:{type:String,default:function a(){return null}}},provide:function a(){var t=this;return{awardDetail:function a(){return t.$refs["award-detail"].awardForm||{}}}},data:function a(){return{isShow:false,applyForm:{},panelCutOut:false,pageType:{apply:l.DETAIL_APPLY,apply_detail:l.DETAIL_APPLY_DETAIL,draft_detail:l.DETAIL_DRAFT_DETAIL,approval_detail:l.DETAIL_APPROVAL_DETAIL},approvalForm:{approvalVisible:false,approvalLoading:false,approvalText:"",approvalTips:""},approvalFormRules:Object.freeze({approvalText:[{required:true,message:"请填写评语",trigger:"blur"}]}),approvalTabItems:[{"tab-name":"审批列表","tab-key":"approval-list"}],approvalType:{pass:1,not_pass:0},pendingApprovalRemoteData:[]}},computed:{formType:function a(t){return t.$route.query[l.DETAIL_TYPE_KEYNAME]||l.DETAIL_APPLY}},created:function a(){this.handleInit()},methods:{handleInit:function a(){this.applyForm=this.$route.params},trigglePanel:function a(){this.panelCutOut=!this.panelCutOut},toApproval:function a(t,r){this.approvalForm.approvalTips=t;this.approvalForm.approvalVisible=true;this.approvalForm.action=r},handlePostApproval:function a(t){var r=this;var e=t.approvalTips,l=t.approvalText,i=t.action;return(0,p.default)(o.default.mark(function a(){return o.default.wrap(function a(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return r.$refs["approval-form"].validate();case 2:r.approvalForm.approvalLoading=true;return t.abrupt("return",(0,n.postApproval)({action:i,id:r.$route.query["record_id"],approval_text:l}).then(function(a){r.messageSuccess(e);r.approvalForm.approvalVisible=false;r.approvalForm.approvalLoading=false;r.$router.back()}));case 4:case"end":return t.stop()}}},a)}))()}}};t.default=i},242:function(a,t,r){},335:function(a,t,r){"use strict";var e=r(242);var o=r.n(e);var p=o.a},385:function(a,t,r){"use strict";var e=function(){var a=this;var t=a.$createElement;var r=a._self._c||t;return r("div",{staticClass:"detail-container"},[r("top-back"),a._v(" "),r("div",{staticClass:"board"},[r("div",[r("bk-divider",{staticStyle:{width:"100%"}})],1),a._v(" "),r("div",{staticClass:"form-panel"},[r("DetailInfo",{ref:"award-detail",staticClass:"detail",attrs:{type:"award_detail"}}),a._v(" "),r("ApplyForm",{ref:"apply-form",staticClass:"form"})],1)]),a._v(" "),a.formType===a.pageType["approval_detail"]?r("div",{staticClass:"tc w100  mt15"},[r("div",{staticClass:"button-item"},[r("bk-button",{staticClass:"mr20 ml20",attrs:{theme:"danger","ext-cls":"button-item"},on:{click:function(t){a.toApproval("拒绝"+a.$refs["apply-form"].applyForm.application_users+"的申请",a.approvalType["not_pass"])}}},[r("bk-icon",{attrs:{type:"close-circle"}}),a._v(" "),r("span",[a._v("不通过")])],1),a._v(" "),r("bk-button",{staticClass:"mr20 ml20",attrs:{theme:"success","ext-cls":"button-item"},on:{click:function(t){a.toApproval("通过"+a.$refs["apply-form"].applyForm.application_users+"的申请",a.approvalType["pass"])}}},[r("span",[a._v("通过")]),a._v(" "),r("bk-icon",{attrs:{type:"check-circle"}})],1)],1)]):a._e(),a._v(" "),r("bk-dialog",{attrs:{"header-position":"left",loading:a.approvalForm.approvalLoading,title:a.approvalForm.approvalTips},on:{confirm:function(t){a.handlePostApproval(a.approvalForm)}},model:{value:a.approvalForm.approvalVisible,callback:function(t){a.$set(a.approvalForm,"approvalVisible",t)},expression:"approvalForm.approvalVisible"}},[r("bk-form",{ref:"approval-form",attrs:{rules:a.approvalFormRules,model:a.approvalForm}},[r("bk-form-item",{attrs:{property:"approvalText",required:true,"label-width":80,label:"评语"}},[r("bk-input",{attrs:{placeholder:"请输入不超过255字的评语",type:"textarea",rows:3,maxlength:255},model:{value:a.approvalForm.approvalText,callback:function(t){a.$set(a.approvalForm,"approvalText",t)},expression:"approvalForm.approvalText"}})],1)],1)],1)],1)};var o=[];r.d(t,"a",function(){return e});r.d(t,"b",function(){return o})}}]);