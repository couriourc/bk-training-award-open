(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{207:function(t,e,a){"use strict";a.r(e);var r=a(382);var n=a(255);for(var o in n)if(o!=="default")(function(t){a.d(e,t,function(){return n[t]})})(o);var i=a(337);var l=a(7);var p=Object(l["a"])(n["default"],r["a"],r["b"],false,null,"2fae8bdc",null);e["default"]=p.exports},214:function(t,e,a){"use strict";var r=a(1);Object.defineProperty(e,"__esModule",{value:true});e.getApplicationById=p;e.getAwardApproval=o;e.getRecord=i;e.postApproval=l;var n=r(a(3));function o(t){var e=t.page,a=t.size,r=t.group_id,o=t.approval_status;return n.default.get("/approval/",{params:{page:e,size:a,group_id:r,approval_status:o}})}function i(t){var e=t.page,a=t.size,r=t.group_id,o=t.apply_status;return n.default.get("record/",{params:{page:e,size:a,group_id:r,apply_status:o}})}function l(t){var e=t.id,a=t.action,r=t.approval_text;return n.default.post("/approval/",{id:e,action:a,approval_text:r})}function p(t){return n.default.get("/application/".concat(t,"/"))}},255:function(t,e,a){"use strict";a.r(e);var r=a(256);var n=a.n(r);for(var o in r)if(o!=="default")(function(t){a.d(e,t,function(){return r[t]})})(o);e["default"]=n.a},256:function(t,e,a){"use strict";var r=a(1);Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var n=r(a(9));var o=r(a(10));var i=r(a(4));var l=a(214);var p=a(8);var c=r(a(0));function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,r)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach(function(e){(0,i.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var v={components:{AwardPendingApproval:function t(){return a.e(37).then(a.bind(null,359))},AwardEndedApproval:function t(){return a.e(36).then(a.bind(null,360))},GroupPendingApproval:function t(){return a.e(39).then(a.bind(null,361))},GroupEndedApproval:function t(){return a.e(38).then(a.bind(null,362))}},data:function t(){return{remoteData:[],pagination:{current:1,count:0,limit:10,award_name:[],department_name:[]},approvalForm:{tips:"",editing:false,id:null,action:null,approval_text:""},isPreviewAttachFiles:false,tmpAttachFiles:[],workbench:"pending-approval",approvalType:"award",checkTabItemsTemplate:[{"tab-name":"待审批","tab-key":"pending-approval"},{"tab-name":"已审批","tab-key":"ended-approval"}]}},computed:{tableData:function t(e){var a,r;return(a=(r=e.remoteData)===null||r===void 0?void 0:r.map(function(t){var e;return u(u(u({},t["award_info"]),t),{},{application_time:(0,c.default)(t["application_time"]).format("YYYY-MM-DD hh:mm:ss"),application_users_list:Object.values((e=t["application_users"])!==null&&e!==void 0?e:{}),approval_state_cn:p.APPLY_APPROVAL_STATE_MAP[t["approval_state"]],approval_state_en:p.APPLY_APPROVAL_STATE_EN_MAP[t["approval_state"]]})}))!==null&&a!==void 0?a:[]},curComponentName:function t(e){return"".concat(e.approvalType,"-").concat(e.workbench)},checkTabItems:function t(e){return e.checkTabItemsTemplate}},created:function t(){this.handleInit()},methods:{handleInit:function t(){var e;var a=this.curComponentName;(e=this.$refs[a])===null||e===void 0?void 0:e.handleInit()},handleChangePage:function t(e){this.pagination.current=e;this.handleGetPageData()},handleChangeLimit:function t(e){this.pagination.current=1;this.pagination.limit=e;this.handleGetPageData()},handleGetPageData:function t(){var e=this;var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.pagination.current;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.pagination.limit;return(0,l.getAwardApproval)(a,r).then(function(t){e.remoteData=t.data["results"];e.pagination=t.data["count"]})},toCheck:function t(e,a,r){console.log(e);this.approvalForm.id=e["id"];this.approvalForm.editing=true;this.approvalForm.action=a;this.approvalForm.tips=r;this.approvalForm.approval_text=""},handleConfirmToSubmitDelApproval:function t(e){var a=this;return(0,o.default)(n.default.mark(function t(){return n.default.wrap(function t(r){while(1){switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(t){(0,l.postApproval)(e).then(function(t){a.messageSuccess("审批成功");a.handleGetPageData();a.approvalForm.editing=false})}));case 1:case"end":return r.stop()}}},t)}))()},toAttachFilePreview:function t(e){this.isPreviewAttachFiles=true;this.tmpAttachFiles=e}}};e.default=v},257:function(t,e,a){},337:function(t,e,a){"use strict";var r=a(257);var n=a.n(r);var o=n.a},382:function(t,e,a){"use strict";var r=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{staticClass:"mycheck-container"},[a("top-back"),t._v(" "),a("div",{staticClass:"header-controller-panel mt15 mb20"},[a("select-search",{staticStyle:{width:"calc(2*118px + 1*8px)","font-size":"15px"},attrs:{behavior:"simplicity",placeholder:"请选择小组",value:t.$bus.curGlobalGroupId,type:"group","id-key":"group_id",multiple:false},on:{"update:value":function(e){t.$set(t.$bus,"curGlobalGroupId",e)},change:function(e){t.handleInit()}}})],1),t._v(" "),a("tabs",{staticClass:"mt15",attrs:{"tab-items":t.checkTabItems},model:{value:t.workbench,callback:function(e){t.workbench=e},expression:"workbench"}},[a("bk-select",{staticStyle:{width:"calc(2*118px + 1*8px)","font-size":"15px"},attrs:{slot:"right-controller","ext-cls":"select-custom","ext-popover-cls":"select-popover-custom",clearable:false},slot:"right-controller",model:{value:t.approvalType,callback:function(e){t.approvalType=e},expression:"approvalType"}},[t.$bus.isCurGroupAdmin?a("bk-option",{attrs:{id:"group",name:"小组审批"}}):t._e(),t._v(" "),a("bk-option",{attrs:{id:"award",name:"奖项审批"}})],1),t._v(" "),[a(t.curComponentName,{ref:t.curComponentName,tag:"component"})]],2),t._v(" "),a("bk-dialog",{attrs:{"header-position":"left","confirm-fn":function(){return t.handleConfirmToSubmitDelApproval(t.approvalForm)}},model:{value:t.approvalForm.editing,callback:function(e){t.$set(t.approvalForm,"editing",e)},expression:"approvalForm.editing"}},[a("template",{slot:"header"},[a("span",{staticClass:"em f16"},[t._v("\n                "+t._s(t.approvalForm.tips)+"\n            ")])]),t._v(" "),a("bk-input",{staticClass:"mb15",attrs:{placeholder:"请输入评语",type:"textarea",rows:5},model:{value:t.approvalForm.approval_text,callback:function(e){t.$set(t.approvalForm,"approval_text",e)},expression:"approvalForm.approval_text"}})],2),t._v(" "),a("bk-dialog",{model:{value:t.isPreviewAttachFiles,callback:function(e){t.isPreviewAttachFiles=e},expression:"isPreviewAttachFiles"}},[a("ul",{staticClass:"file-list"},t._l(t.tmpAttachFiles,function(e,r){return a("li",{key:e.url,staticClass:"mt5 file-item"},[a("bk-link",{attrs:{href:e.path,theme:"primary"}},[t._v("\n                    "+t._s(r+1)+" "+t._s(e.name)+"\n                ")])],1)}),0)])],1)};var n=[];a.d(e,"a",function(){return r});a.d(e,"b",function(){return n})}}]);