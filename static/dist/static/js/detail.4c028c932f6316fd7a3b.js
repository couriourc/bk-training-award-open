(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{199:function(a,r,t){"use strict";t.r(r);var e=t(384);var o=t(240);for(var p in o)if(p!=="default")(function(a){t.d(r,a,function(){return o[a]})})(p);var l=t(334);var n=t(18);var i=Object(n["a"])(o["default"],e["a"],e["b"],false,null,"aa67e7c0",null);r["default"]=i.exports},240:function(a,r,t){"use strict";t.r(r);var e=t(241);var o=t.n(e);for(var p in e)if(p!=="default")(function(a){t.d(r,a,function(){return e[a]})})(p);r["default"]=o.a},241:function(a,r,t){"use strict";var e=t(1);Object.defineProperty(r,"__esModule",{value:true});r.default=void 0;var o=e(t(11));var p=e(t(12));var l=t(7);var n=t(209);var i={name:"detail",components:{DetailInfo:function a(){return Promise.all([t.e(0),t.e(22)]).then(t.bind(null,366))},ApplyForm:function a(){return Promise.all([t.e(0),t.e(21)]).then(t.bind(null,368))}},props:{type:{type:String,default:function a(){return null}}},provide:function a(){var r=this;return{awardDetail:function a(){return r.$refs["award-detail"].awardForm||{}}}},data:function a(){return{isShow:false,applyForm:{},panelCutOut:false,pageType:{apply:l.DETAIL_APPLY,apply_detail:l.DETAIL_APPLY_DETAIL,draft_detail:l.DETAIL_DRAFT_DETAIL,approval_detail:l.DETAIL_APPROVAL_DETAIL},approvalForm:{approvalVisible:false,approvalLoading:false,approvalText:"",approvalTips:""},approvalFormRules:Object.freeze({approvalText:[{required:true,message:"请填写评语",trigger:"blur"}]}),approvalTabItems:[{"tab-name":"审批列表","tab-key":"approval-list"}],approvalType:{pass:1,not_pass:0},pendingApprovalRemoteData:[]}},computed:{formType:function a(r){return r.$route.query[l.DETAIL_TYPE_KEYNAME]||l.DETAIL_APPLY}},created:function a(){this.handleInit()},methods:{handleInit:function a(){this.applyForm=this.$route.params},trigglePanel:function a(){this.panelCutOut=!this.panelCutOut},toApproval:function a(r,t){this.approvalForm.approvalTips=r;this.approvalForm.approvalVisible=true;this.approvalForm.action=t},handlePostApproval:function a(r){var t=this;var e=r.approvalTips,l=r.approvalText,i=r.action;return(0,p.default)(o.default.mark(function a(){var r;return o.default.wrap(function a(o){while(1){switch(o.prev=o.next){case 0:o.next=2;return t.$refs["approval-form"].validate();case 2:r=t.$route.query["record_id"];t.approvalForm.approvalLoading=true;return o.abrupt("return",(0,n.postApproval)({id:r,action:i,approval_text:l}).then(function(a){t.messageSuccess(e);t.approvalForm.approvalVisible=false;t.approvalForm.approvalLoading=false;t.$router.back()}));case 5:case"end":return o.stop()}}},a)}))()}}};r.default=i},242:function(a,r,t){},334:function(a,r,t){"use strict";var e=t(242);var o=t.n(e);var p=o.a},384:function(a,r,t){"use strict";var e=function(){var a=this;var r=a.$createElement;var t=a._self._c||r;return t("div",{staticClass:"detail-container"},[t("top-back"),a._v(" "),t("div",{staticClass:"board"},[t("div",[t("bk-divider",{staticStyle:{width:"100%"}})],1),a._v(" "),t("div",{staticClass:"form-panel"},[t("DetailInfo",{ref:"award-detail",staticClass:"detail",attrs:{type:"award_detail"}}),a._v(" "),t("ApplyForm",{ref:"apply-form",staticClass:"form"})],1)]),a._v(" "),a.formType===a.pageType["approval_detail"]?t("div",{staticClass:"tc w100  mt15"},[t("div",{staticClass:"button-item"},[t("bk-button",{staticClass:"mr20 ml20",attrs:{theme:"danger","ext-cls":"button-item"},on:{click:function(r){a.toApproval("拒绝"+a.$refs["apply-form"].applyForm.application_users+"的申请",a.approvalType["not_pass"])}}},[t("bk-icon",{attrs:{type:"close-circle"}}),a._v(" "),t("span",[a._v("不通过")])],1),a._v(" "),t("bk-button",{staticClass:"mr20 ml20",attrs:{theme:"success","ext-cls":"button-item"},on:{click:function(r){a.toApproval("通过"+a.$refs["apply-form"].applyForm.application_users+"的申请",a.approvalType["pass"])}}},[t("span",[a._v("通过")]),a._v(" "),t("bk-icon",{attrs:{type:"check-circle"}})],1)],1)]):a._e(),a._v(" "),t("bk-dialog",{attrs:{"header-position":"left",loading:a.approvalForm.approvalLoading,title:a.approvalForm.approvalTips},on:{confirm:function(r){a.handlePostApproval(a.approvalForm)}},model:{value:a.approvalForm.approvalVisible,callback:function(r){a.$set(a.approvalForm,"approvalVisible",r)},expression:"approvalForm.approvalVisible"}},[t("bk-form",{ref:"approval-form",attrs:{rules:a.approvalFormRules,model:a.approvalForm}},[t("bk-form-item",{attrs:{property:"approvalText",required:true,"label-width":80,label:"评语"}},[t("bk-input",{attrs:{placeholder:"请输入不超过255字的评语",type:"textarea",rows:3,maxlength:255},model:{value:a.approvalForm.approvalText,callback:function(r){a.$set(a.approvalForm,"approvalText",r)},expression:"approvalForm.approvalText"}})],1)],1)],1)],1)};var o=[];t.d(r,"a",function(){return e});t.d(r,"b",function(){return o})}}]);