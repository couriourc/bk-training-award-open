(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{268:function(a,e,t){"use strict";t.r(e);var n=t(269);var i=t.n(n);for(var s in n)if(s!=="default")(function(a){t.d(e,a,function(){return n[a]})})(s);e["default"]=i.a},269:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var n=t(349);var i=t(151);var s={name:"message-list",components:{MessageCard:function a(){return t.e(24).then(t.bind(null,376))}},data:function a(){return{messageRemoteData:[],loading:false,pagination:{current:1,count:0,limit:10}}},computed:{messageData:function a(e){var t,n;return(t=(n=e.messageRemoteData)===null||n===void 0?void 0:n.map(function(a){return{msg_id:a["id"],group_id:a["group_id"],group_name:a["group_name"],action_type:a["action_type"],action_target:a["action_target"],action_username:a["action_username"],action_display_name:a["action_display_name"],action_display_name_for_display:(0,i.formatUsernameAndDisplayName)(a["action_username"],a["action_display_name"]),message:a["message"],is_read:a["is_read"]}}))!==null&&t!==void 0?t:[]}},created:function a(){this.handleInit()},methods:{handleInit:function a(){this.handleGetPageData()},handleSetLimit:function a(){this.pagination.current=1;return this.handleGetPageData()},handleGetPageData:function a(){var e=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.pagination.current;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.pagination.limit;if(this.loading){return}this.loading=true;return(0,n.getMessage)({page:t,size:i}).then(function(a){e.messageRemoteData=a.data.data;e.pagination.count=a.data.count}).finally(function(a){e.loading=false})},handleRead:function a(e,t){var i=this;var s=e.msg_id,r=e.message;return(0,n.putMessage)({msg_id:s}).then(function(a){i.messageRemoteData[t]["is_read"]=true})}}};e.default=s},270:function(a,e,t){},348:function(a,e,t){"use strict";t.r(e);var n=t(399);var i=t(268);for(var s in i)if(s!=="default")(function(a){t.d(e,a,function(){return i[a]})})(s);var r=t(350);var o=t(18);var u=Object(o["a"])(i["default"],n["a"],n["b"],false,null,"641a6c3c",null);e["default"]=u.exports},349:function(a,e,t){"use strict";var n=t(1);Object.defineProperty(e,"__esModule",{value:true});e.getMessage=s;e.putMessage=r;var i=n(t(4));function s(a){var e=a.page,t=a.size;return i.default.get("/message/",{params:{page:e,size:t}})}function r(a){var e=a.msg_id;return i.default.put("/message/",{msg_id:e})}},350:function(a,e,t){"use strict";var n=t(270);var i=t.n(n);var s=i.a},399:function(a,e,t){"use strict";var n=function(){var a=this;var e=a.$createElement;var t=a._self._c||e;return t("div",{staticClass:"message-table"},[t("div",{directives:[{name:"show",rawName:"v-show",value:a.messageData.length,expression:"messageData.length"},{name:"bkloading",rawName:"v-bkloading",value:{isLoading:a.loading,title:"请稍等,正在为您安放数据"},expression:"{ isLoading: loading ,title: '请稍等,正在为您安放数据' }"}],staticClass:"message-content"},a._l(a.messageData,function(e,n){return t("message-card",{key:e["id"],attrs:{message:e},on:{"tool-click":function(t){a.handleRead(e,n)}}})}),1),a._v(" "),t("empty",{directives:[{name:"show",rawName:"v-show",value:!a.messageData.length,expression:"!messageData.length"}]}),a._v(" "),t("bk-pagination",{directives:[{name:"show",rawName:"v-show",value:a.pagination.count>2,expression:"pagination.count > 2"}],attrs:{small:true,current:a.pagination.current,count:a.pagination.count,limit:a.pagination.limit},on:{"update:current":function(e){a.$set(a.pagination,"current",e)},"update:limit":function(e){a.$set(a.pagination,"limit",e)},"limit-change":function(e){a.handleSetLimit()},change:function(e){a.handleInit()}}})],1)};var i=[];t.d(e,"a",function(){return n});t.d(e,"b",function(){return i})}}]);