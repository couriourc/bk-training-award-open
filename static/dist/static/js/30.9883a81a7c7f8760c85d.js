(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[30],{212:function(t,a,e){"use strict";var n=e(1);Object.defineProperty(a,"__esModule",{value:true});a.deleteRecord=_;a.getAvailableAwards=l;a.getAwardById=p;a.getAwards=u;a.postAwards=s;a.postFinishAward=w;a.postRecord=c;a.putAward=f;var r=n(e(4));var i=n(e(3));function o(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);a&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,n)}return e}function d(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?o(Object(e),!0).forEach(function(a){(0,r.default)(t,a,e[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):o(Object(e)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))})}return t}function s(t){return i.default.post("awards/",t)}function u(t){var a=t.page,e=t.size,n=t.group_id,r=t.award_status;return i.default.get("awards/",{params:{page:a,size:e,group_id:n,award_status:r}})}function l(t){var a=t.page,e=t.size,n=t.award_status,r=t.group_id;return i.default.get("get_available_awards/",{params:{page:a,size:e,award_status:n,group_id:r}})}function c(t,a){return i.default.post("record/",d({is_draft:t},a))}function _(t){console.log(t);return i.default.delete("record/",{data:{id:t}})}function f(t,a){var e=a.award_name,n=a.award_level,r=a.award_description,o=a.award_consultant,d=a.award_image,s=a.award_department_fullname,u=a.award_reviewers,l=a.start_time,c=a.end_time,_=a.award_department_id,f=a.award_consultant_displayname,p=a.award_demand;return i.default.put("awards/",{award_id:t,award_name:e,award_level:n,award_description:r,award_consultant:o,award_image:d,award_department_fullname:s,award_reviewers:u,start_time:l,end_time:c,award_department_id:_,award_consultant_displayname:f,award_demand:p})}function p(t){return i.default.get("/awards/".concat(t,"/"))}function w(t){return i.default.post("/finish_award/".concat(t,"/"))}},214:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:true});a.tableMixins=void 0;var n={data:function t(){return{pagination:{count:0,limit:10,current:1},loading:false}}};a.tableMixins=n},290:function(t,a,e){"use strict";e.r(a);var n=e(291);var r=e.n(n);for(var i in n)if(i!=="default")(function(t){e.d(a,t,function(){return n[t]})})(i);a["default"]=r.a},291:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:true});a.default=void 0;var n=e(212);var r=e(214);var i=e(8);var o={name:"ended-approval",mixins:[r.tableMixins],data:function t(){return{ingReviewRemoteData:[]}},computed:{ingReviewData:function t(a){var e;return(e=a.ingReviewRemoteData)===null||e===void 0?void 0:e.map(function(t){return{award_id:t["id"],award_name:t["award_name"],award_description:t["award_description"],award_department_fullname:t["award_department_fullname"],award_department_id:t["award_department_id"],award_reviewers:t["award_reviewers"],award_consultant:t["award_consultant"],award_consultant_displayname:t["award_consultant_displayname"],award_consultant_displayname_for_display:t["award_consultant"]+"（"+t["award_consultant_displayname"]+"）",award_demand:t["award_demand"],start_time:t["start_time"],end_time:t["end_time"],approval_state:t["approval_state"]}})}},mounted:function t(){this.handleInit()},methods:{handleInit:function t(){Promise.all([this.handleGetIngReview()])},handleGetIngReview:function t(){var a=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.pagination.current;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.pagination.size;if(this.loading)return;this.loading=true;var o={page:e,size:r,award_status:i.ING_REVIEW,group_id:this.$bus.curGlobalGroupId};return(0,n.getAwards)(o).then(function(t){var e=t.data;a.pagination.count=e.count;a.ingReviewRemoteData=e.data}).finally(function(t){a.loading=false})},handleToGetDetail:function t(a){console.log(a);this.$router.push({name:i.AWARD_APPLICATION_DETAILS_ROUTE_PATH,query:{award_id:a["award_id"],group_id:this.$bus.curGlobalGroupId}})},handleToOverAward:function t(a){var e=this;return(0,n.postFinishAward)(a["award_id"]).then(function(t){e.handleInit();e.messageSuccess("已成功终止奖项评审")})}}};a.default=o},356:function(t,a,e){"use strict";e.r(a);var n=e(397);var r=e(290);for(var i in r)if(i!=="default")(function(t){e.d(a,t,function(){return r[t]})})(i);var o=e(7);var d=Object(o["a"])(r["default"],n["a"],n["b"],false,null,null,null);a["default"]=d.exports},397:function(t,a,e){"use strict";var n=function(){var t=this;var a=t.$createElement;var e=t._self._c||a;return e("self-table",{attrs:{data:t.ingReviewData,loading:t.loading,pagination:t.pagination},on:{"update:pagination":function(a){t.pagination=a},"page-change":function(a){t.handleInit()}}},[e("bk-table-column",{attrs:{type:"index",label:"序号",width:60}}),t._v(" "),e("bk-table-column",{attrs:{label:"奖项名称"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{attrs:{title:a.row["award_name"]},domProps:{textContent:t._s(a.row["award_name"])}})]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:"奖项开始时间"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{attrs:{title:a.row["start_time"]},domProps:{textContent:t._s(a.row["start_time"])}})]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:"奖项截止时间"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{attrs:{title:a.row["end_time"]},domProps:{textContent:t._s(a.row["end_time"])}})]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:"奖项咨询人"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{attrs:{title:a.row["award_consultant_displayname_for_display"]}},[t._v(t._s(a.row["award_consultant_displayname_for_display"]))])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:"总评审轮次",width:300},scopedSlots:t._u([{key:"default",fn:function(a){return[e("bk-select",{attrs:{value:0,clearable:false}},t._l(a.row["award_reviewers"],function(t,a){return e("bk-option",{key:t,attrs:{name:"第"+(a+1)+"轮:"+t.join(","),id:a,title:"第"+(a+1)+"轮:"+t.join(",")}})}),1)]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("bk-popconfirm",{attrs:{trigger:"click",width:"280"},on:{confirm:function(e){t.handleToOverAward(a.row)}}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("i",{staticClass:"bk-icon icon-info-circle-shape pr5 content-icon",staticStyle:{color:"#cc3333"}}),t._v(" "),e("span",{staticClass:"content-text"},[t._v("将会提前结束奖项,未评审的将置为未通过\n                    ")])]),t._v(" "),e("bk-button",{staticClass:"mr20 ml20 ",attrs:{theme:"danger",text:true}},[t._v("结束奖项")])],1)]}}])})],1)};var r=[];e.d(a,"a",function(){return n});e.d(a,"b",function(){return r})}}]);